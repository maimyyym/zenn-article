---
title: "【AWS SDK for JavaScript v3】DynamoDB操作に使うあれこれ"
emoji: "🪸"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["aws"]
published: false
---
## この記事で解決すること
SDK for JavaScript v3を用いてDynamoDBを操作する時に使用する方法の違い
- `@aws-sdk/lib-dynamodb`
- `@aws-sdk/client-dynamodb`

## やりたいこと
SDK for JavaScript v3を用いてDynamoDBにデータを挿入するLambda関数コードを書きます。
### 環境
Node.js v20

## AWS SDK for JavaScript v3でのDynamoDB操作について
AWS SDK for JavaScript v3では、操作したい各リソースごとにライブラリをインストールして使用します。DynamoDB操作の場合、`@aws-sdk/client-dynamodb`もしくは`@aws-sdk/lib-dynamodb`のどちらかをインストールします。
```
npm install @aws-sdk/client-dynamodb
```
または
```
npm install @aws-sdk/lib-dynamodb
```

### ここで謎
どっちを使えばいいの？？

## どう違うの？（ざっくり）
### `@aws-sdk/client-dynamodb`
https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/client/dynamodb/

### `@aws-sdk/lib-dynamodb`
https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/Package/-aws-sdk-lib-dynamodb/
> The document client simplifies working with items in Amazon DynamoDB by abstracting away the notion of attribute values. This abstraction annotates native JavaScript types supplied as input parameters, as well as converts annotated response data to native JavaScript types.

こちらはDynamoDBの属性値の概念を抽象化することで操作を簡素化したものだそうです。
DynamoDBはデータ型としてAttributeValueを使いますが、ドキュメントクライアントによりJavaScriptの型を使用してリクエスト・レスポンスを扱うことができます。
（図解）
ドキュメントクライアントはDynamoDBClientをラップしたものと言えるでしょう。

## コードの違いを見る
### やること
（テーブルの図）
このようなテーブルに以下のアイテムをputします。

### `@aws-sdk/client-dynamodb`の場合
```js
// コード
```

### `@aws-sdk/lib-dynamodb`の場合
```js
// コード
```

## どっちを使う？
### DynamoDBClientのメリット・デメリット

### `@aws-sdk/lib-dynamodb`のメリット・デメリット
